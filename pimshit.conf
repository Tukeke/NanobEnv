declare -A drivers drivercmds
declare -a paths driverdirs

# Here we define, foreach action, wich driver will be taken
drivers=(
    [messaging]="weechat"
    [calendar]="calcurse" 
    [mail]="mutt"
    [contacts]="abook"
    [sync_contacts]="goobook"
    [files]="mc"
)
#   [torrent]="deluge" # NOT PIM, but I use those everyday, so I comment them here.
#   [music]="mocp"
# Each driver should execute this, if not binary available on main dir
drivercmds=(
    ['mc']="mc -S modarin256 -x -g"
    ['calcurse']="calcurse -D $HOME/.pimshit/calcurse/"
    ['mutt']="mutt -F ~/.pimshit/mutt/muttrc"
    ['weechat']="weechat-curses --dir=~/.pimshit/weechat/" 
    ['abook']="abook -C ~/.pimshit/abook/abookrc --datafile="
    ['goobook']="goobook -c ~/.pimshit/goobook/goobookrc"
    ['deluge']="deluge --ui=console"
    ['mocp']="mocp"
)

# Paths where check for pimshit
paths=(
    '/usr/share/pimshit'
    '/usr/local/share/pimshit'
)

# Checkout local conf dirs for each driver here
driverdirs=(
    '~/.pimshit/calcurse'
    '~/.pimshit/goobook'
    '~/.pimshit/mutt/muttrc'
)

# Dont touch

function pimshit_call(){
    cmd=$1; shift;
    [[ ${cmd} ]] && ${drivercmds[${drivers[${cmd}]}]} ${@}
}
for path in ${paths[@]}; do [[ -e $path ]] && wd=$path; done

