declare -A drivers drivercmds
declare -a paths driverdirs

# Here we define, foreach action, wich driver will be taken
drivers=(
    [calendar]="calcurse" 
    [mail]="mutt"
    [messaging]="weechat"
    [contacts]="abook"
    [sync_contacts]="goobook"
)

# Each driver should execute this, if not binary available on main dir
drivercmds=(
    ['calcurse']="calcurse -D $HOME/.pimshit/calcurse/"
    ['mutt']="mutt -F ~/.pimshit/mutt/muttrc"
    ['weechat']="weechat" 
    ['abook']="abook -C ~/.pimshit/abook/abookrc --datafile="
    ['goobook']="goobook -c ~/.pimshit/goobook/goobookrc"
)

# Paths where check for pimshit
paths=(
    '/usr/share/pimshit'
    '/usr/local/share/pimshit'
)

# Checkout local conf dirs for each driver here
driverdirs=(
    '~/.pimshit/calcurse'
    '~/.pimshit/goobook'
    '~/.pimshit/mutt/muttrc'
)

# Dont touch

function pimshit_call(){
    cmd=$1; shift;
    [[ ${cmd} ]] && ${drivercmds[${drivers[${cmd}]}]} ${@}
}
for path in ${paths[@]}; do [[ -e $path ]] && wd=$path; done

